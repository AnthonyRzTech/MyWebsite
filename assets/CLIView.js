var Ue=Object.defineProperty;var Ve=(s,e,n)=>e in s?Ue(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var ue=(s,e,n)=>(Ve(s,typeof e!="symbol"?e+"":e,n),n);import{a6 as Q,a7 as He,S as B,i as Y,s as ee,e as m,t as j,b as w,d as p,f as g,C as P,X as L,n as d,a8 as X,a9 as se,aa as ie,W as S,O as ce,a as D,N as G,ab as Ke,ac as fe,ad as We,z as J,h as F,j as T,k as U,g as v,E as V,ae as Pe,o as R,p as M,q as z,af as _e,ag as pe,ah as de,ai as Be,U as Ye,F as Qe,aj as Xe,Q as Ge,D as Je,Y as Ze}from"./index.js";import{e as q,u as te,d as ae,g as xe,o as et}from"./each.js";import{L as Re}from"./Link.js";function Me(){return Q.set([]),He.set(!0),""}function tt(s){if(s=s.trim(),s==="")return[];let e=!1,n=null;const t=[[""]];let r=0,o=0;for(let l=0;l<s.length;l++)if(e)s[l]===n?(e=!1,n=null,l<s.length-1&&(t[r].push(""),o++)):t[r][o]+=s[l];else switch(s[l]){case"'":case'"':case" ":s[l]!==" "&&(e=!0,n=s[l]),t[r][o]!==""&&(t[r].push(""),o++);break;case";":if(t[r][o]===""){if(t[r].length===1)throw new Error(`${s}
${" ".repeat(l+7)}^ Unexpected token`);t[r].pop()}l<s.length-1&&(t.push(";"),t.push([""]),r+=2,o=0);break;case"|":if(s[l+1]!=="|")throw new Error(`${s}
${" ".repeat(l+7)}^ Not implemented.`);if(t[r][o]===""){if(t[r].length===1)throw new Error(`${s}
${" ".repeat(l+7)}^ Unexpected token`);t[r].pop()}if(l+1<s.length-1)t.push(";"),t.push([""]),r+=2,o=0,l++;else throw new Error(`${s}
${" ".repeat(l+9)}^ A pipeline chain operator must be followed by a pipeline.`);break;case">":case"&":case"(":case")":throw new Error(`${s}
${" ".repeat(l+7)}^ Not yet implemented.`);default:t[r][o]+=s[l]}if(e)throw new Error(`${s}
${" ".repeat(s.length+7)}^ Unclosed string`);return t}function nt(s){let e,n;return{c(){e=m("pre"),n=j(s[0]),w(e,"class","red")},m(t,r){p(t,e,r),g(e,n)},p(t,[r]){r&1&&P(n,t[0])},i:L,o:L,d(t){t&&d(e)}}}function lt(s,e,n){let{message:t}=e;return s.$$set=r=>{"message"in r&&n(0,t=r.message)},[t]}class rt extends B{constructor(e){super(),Y(this,e,lt,nt,ee,{message:0})}}function ne(s){if(s=s.replace("/home/aureliendumay.me","~"),s.startsWith("/"))throw new Error("Permission denied");const e=s.split("/");let n=[];if(X.subscribe(r=>n=[...r])(),e[0]==="~")return e.shift(),e;for(let r=0;r<e.length;r++)switch(e[r]){case"..":if(n.length>1)n.pop();else throw new Error("Permission denied");break;case".":break;default:if(!e[r])break;n.push(e[r])}return n.shift(),n}class st{constructor(){ue(this,"options");this.options=[]}get value(){return this.options}add(e,n=null){this.options.push({value:e,potentialArgument:n})}includesOneOf(...e){return this.options.findIndex(n=>e.includes(n.value))!==-1}}function ze(s,e,n,t){const r=new st,o=[];for(let l=0;l<s.length;l++)if(s[l].startsWith("--")){if(e&&!e.includes(s[l].substring(2)))throw new Error("Invalid option '"+s[l]+"'");if(s[l].substring(2).length===1)throw new Error("option '"+s[l]+"' is ambiguous");r.add(s[l].substring(2),s[l+1]&&s[l+1].startsWith("-")?null:s[l+1])}else if(s[l].startsWith("-")){if(s[l]==="-")throw new Error("Invalid option '-'");const c=s[l].substring(1).split("");for(let i=0;i<c.length;i++){if(e&&!e.includes(c[i]))throw new Error("Invalid option '-"+c[i]+"'");r.add(c[i],c.length-1&&s[l+1]&&!s[l+1].startsWith("-")?s[l+1]:null)}}else{if(n&&o.length+1>n)throw new Error("To many arguments");o.push(s[l])}if(t&&t>o.length)throw new Error("At least "+t+" argument(s) expected");return{options:r,regularArgs:o}}function Z(s){throw new Error(s)}function le(s){let e=null;if(se.subscribe(t=>e=t!==null?{...t}:e)(),e===null)throw new Error("Internal");for(let t=0;t<s.length;t++){if(e[s[t]]===void 0)throw new Error(s[t]+": No such file or directory");if(e[s[t]].type==="folder")e=e[s[t]].children;else{if(t===s.length-1)return[e[s[t]],"file"];throw new Error(s[t]+": Not a directory")}}return[e,"fileTree"]}async function ot(s,e){try{const n=ne(s),[t,r]=le(n);(r==="fileTree"||t.role!=="bin")&&Z("not found");const l="{return "+await(await fetch("/files/"+n.join("/"))).text()+"}",i=new Function(l).call(null).call(e);return i===void 0?"":i}catch{throw new Error(s+": not found")}}function it(s){try{if(s.length>1&&Z("too many arguments"),s.length===0)return X.set(["~"]),"";const e=ne(s[0]),[,n]=le(e);n==="fileTree"?X.set(["~",...e]):Z("Not a directory")}catch(e){switch(e.message){case"Not a directory":case"No such file or directory":throw new Error("cd: "+s[0]+": "+e.message);default:throw new Error("cd: "+e.message)}}return""}function he(s,e,n){const t=s.slice();return t[3]=e[n][0],t[4]=e[n][1],t}function me(s,e,n){const t=s.slice();return t[3]=e[n][0],t[4]=e[n][1],t}function ct(s){let e,n=q(Object.entries(s[0])),t=[];for(let r=0;r<n.length;r+=1)t[r]=ke(he(s,n,r));return{c(){e=m("p");for(let r=0;r<t.length;r+=1)t[r].c();w(e,"class","long svelte-19nq6mg")},m(r,o){p(r,e,o);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(r,o){if(o&3){n=q(Object.entries(r[0]));let l;for(l=0;l<n.length;l+=1){const c=he(r,n,l);t[l]?t[l].p(c,o):(t[l]=ke(c),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},d(r){r&&d(e),ce(t,r)}}}function ft(s){let e,n=q(Object.entries(s[0])),t=[];for(let r=0;r<n.length;r+=1)t[r]=we(me(s,n,r));return{c(){e=m("div");for(let r=0;r<t.length;r+=1)t[r].c();w(e,"class","short svelte-19nq6mg")},m(r,o){p(r,e,o);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null)},p(r,o){if(o&3){n=q(Object.entries(r[0]));let l;for(l=0;l<n.length;l+=1){const c=me(r,n,l);t[l]?t[l].p(c,o):(t[l]=we(c),t[l].c(),t[l].m(e,null))}for(;l<t.length;l+=1)t[l].d(1);t.length=n.length}},d(r){r&&d(e),ce(t,r)}}}function be(s){let e,n,t=s[4].nlink+"",r,o,l,c,i,f,u,a=s[4].blksize+"",E,W,I,A=s[4].mtime+"",b,y,_,h=s[3]+"",O;function H(k,N){return k[4].type==="folder"?_t:k[4].role==="bin"?ut:at}let $=H(s),C=$(s);return{c(){C.c(),e=D(),n=m("span"),r=j(t),o=D(),l=m("span"),l.textContent="root",c=D(),i=m("span"),i.textContent="root",f=D(),u=m("span"),E=j(a),W=D(),I=m("span"),b=j(A),y=D(),_=m("span"),O=j(h),w(n,"class","svelte-19nq6mg"),w(l,"class","svelte-19nq6mg"),w(i,"class","svelte-19nq6mg"),w(u,"class","svelte-19nq6mg"),w(I,"class","svelte-19nq6mg"),w(_,"class","left svelte-19nq6mg"),G(_,"color",x(s[4].role))},m(k,N){C.m(k,N),p(k,e,N),p(k,n,N),g(n,r),p(k,o,N),p(k,l,N),p(k,c,N),p(k,i,N),p(k,f,N),p(k,u,N),g(u,E),p(k,W,N),p(k,I,N),g(I,b),p(k,y,N),p(k,_,N),g(_,O)},p(k,N){$!==($=H(k))&&(C.d(1),C=$(k),C&&(C.c(),C.m(e.parentNode,e))),N&1&&t!==(t=k[4].nlink+"")&&P(r,t),N&1&&a!==(a=k[4].blksize+"")&&P(E,a),N&1&&A!==(A=k[4].mtime+"")&&P(b,A),N&1&&h!==(h=k[3]+"")&&P(O,h),N&1&&G(_,"color",x(k[4].role))},d(k){k&&(d(e),d(n),d(o),d(l),d(c),d(i),d(f),d(u),d(W),d(I),d(y),d(_)),C.d(k)}}}function at(s){let e;return{c(){e=m("span"),e.textContent="-rw-r--r--",w(e,"class","svelte-19nq6mg")},m(n,t){p(n,e,t)},d(n){n&&d(e)}}}function ut(s){let e;return{c(){e=m("span"),e.textContent="-rwxrwxrwx",w(e,"class","svelte-19nq6mg")},m(n,t){p(n,e,t)},d(n){n&&d(e)}}}function _t(s){let e;return{c(){e=m("span"),e.textContent="drwxr-xr-x",w(e,"class","svelte-19nq6mg")},m(n,t){p(n,e,t)},d(n){n&&d(e)}}}function ke(s){let e,n=(s[1]||!s[4].hidden)&&be(s);return{c(){n&&n.c(),e=S()},m(t,r){n&&n.m(t,r),p(t,e,r)},p(t,r){t[1]||!t[4].hidden?n?n.p(t,r):(n=be(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){t&&d(e),n&&n.d(t)}}}function ge(s){let e,n=s[3]+"",t;return{c(){e=m("span"),t=j(n),G(e,"color",x(s[4].role)),w(e,"class","svelte-19nq6mg")},m(r,o){p(r,e,o),g(e,t)},p(r,o){o&1&&n!==(n=r[3]+"")&&P(t,n),o&1&&G(e,"color",x(r[4].role))},d(r){r&&d(e)}}}function we(s){let e,n=(s[1]||!s[4].hidden)&&ge(s);return{c(){n&&n.c(),e=S()},m(t,r){n&&n.m(t,r),p(t,e,r)},p(t,r){t[1]||!t[4].hidden?n?n.p(t,r):(n=ge(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){t&&d(e),n&&n.d(t)}}}function pt(s){let e;function n(o,l){return o[2]?ct:ft}let t=n(s),r=t(s);return{c(){r.c(),e=S()},m(o,l){r.m(o,l),p(o,e,l)},p(o,[l]){t===(t=n(o))&&r?r.p(o,l):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},i:L,o:L,d(o){o&&d(e),r.d(o)}}}function x(s){switch(s){case"folder":return"#3b78ff";case"bin":return"lime";default:return"white"}}function dt(s,e,n){let{result:t,a:r,l:o}=e;return s.$$set=l=>{"result"in l&&n(0,t=l.result),"a"in l&&n(1,r=l.a),"l"in l&&n(2,o=l.l)},[t,r,o]}class ye extends B{constructor(e){super(),Y(this,e,dt,pt,ie,{result:0,a:1,l:2})}}function ht(s){try{const{regularArgs:e,options:n}=ze(s,["a","l","all"],1),t=n.includesOneOf("a","all"),r=n.includesOneOf("l"),o=e.length>0?e[0]:".",l=ne(o),[c,i]=le(l);if(i==="fileTree"){const f={};for(let[u,a]of Object.entries(c)){if(a.mtime!==void 0){const E=new Date(a.mtime);a.mtime=`${Ke[E.getMonth()]} ${E.getDate()} ${E.getFullYear()}`}a.type==="file"?f[u]=a:f[u]={type:"folder",role:"folder",hidden:a.hidden,nlink:a.nlink,blksize:a.blksize,mtime:a.mtime}}return{component:ye,data:{result:f,a:t,l:r}}}else return{component:ye,data:{result:{[l[l.length-1]]:{type:"file",role:c.role,hidden:c.hidden,nlink:c.nlink,blksize:c.blksize,mtime:c.mtime}},a:t,l:r}}}catch(e){throw new Error("ls: "+e.message)}}function mt(){let s=null;if(fe.subscribe(n=>s=[...n])(),s===null)throw new Error("Internal");return s.reverse().join(`
`)}function ve(s,e,n){const t=s.slice();t[8]=e[n],t[10]=n;const r=t[4](t[8]);return t[11]=r,t}function $e(s,e,n){const t=s.slice();return t[8]=e[n],t[10]=n,t}function bt(s){let e=[],n=new Map,t,r=q(s[0]);const o=l=>l[10];for(let l=0;l<r.length;l+=1){let c=ve(s,r,l),i=o(c);n.set(i,e[l]=Ee(i,c))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=S()},m(l,c){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(l,c);p(l,t,c)},p(l,c){c&17&&(r=q(l[0]),e=te(e,c,o,1,l,r,n,t.parentNode,ae,Ee,t,ve))},d(l){l&&d(t);for(let c=0;c<e.length;c+=1)e[c].d(l)}}}function kt(s){let e=[],n=new Map,t,r=q(s[0]);const o=l=>l[10];for(let l=0;l<r.length;l+=1){let c=$e(s,r,l),i=o(c);n.set(i,e[l]=Te(i,c))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=S()},m(l,c){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(l,c);p(l,t,c)},p(l,c){c&25&&(r=q(l[0]),e=te(e,c,o,1,l,r,n,t.parentNode,ae,Te,t,$e))},d(l){l&&d(t);for(let c=0;c<e.length;c+=1)e[c].d(l)}}}function gt(s){let e,n=s[11]+"",t;return{c(){e=m("pre"),t=j(n)},m(r,o){p(r,e,o),g(e,t)},p(r,o){o&1&&n!==(n=r[11]+"")&&P(t,n)},d(r){r&&d(e)}}}function wt(s){let e;return{c(){e=m("br")},m(n,t){p(n,e,t)},p:L,d(n){n&&d(e)}}}function Ee(s,e){let n,t;function r(c,i){return c[11]===""?wt:gt}let o=r(e),l=o(e);return{key:s,first:null,c(){n=S(),l.c(),t=S(),this.first=n},m(c,i){p(c,n,i),l.m(c,i),p(c,t,i)},p(c,i){e=c,o===(o=r(e))&&l?l.p(e,i):(l.d(1),l=o(e),l&&(l.c(),l.m(t.parentNode,t)))},d(c){c&&(d(n),d(t)),l.d(c)}}}function Te(s,e){let n,t,r=e[3](e[8])+"",o,l,c,i=e[4](e[8])+"",f,u;return{key:s,first:null,c(){n=m("div"),t=m("div"),o=D(),l=m("div"),c=m("pre"),f=j(i),u=D(),w(t,"class","counter-counted-line svelte-1k9t3jf"),w(l,"class","content-counted-line"),w(n,"class","counted-line svelte-1k9t3jf"),this.first=n},m(a,E){p(a,n,E),g(n,t),t.innerHTML=r,g(n,o),g(n,l),g(l,c),g(c,f),g(n,u)},p(a,E){e=a,E&1&&r!==(r=e[3](e[8])+"")&&(t.innerHTML=r),E&1&&i!==(i=e[4](e[8])+"")&&P(f,i)},d(a){a&&d(n)}}}function yt(s){let e;function n(o,l){return o[1]||o[2]?kt:bt}let t=n(s),r=t(s);return{c(){r.c(),e=S()},m(o,l){r.m(o,l),p(o,e,l)},p(o,[l]){t===(t=n(o))&&r?r.p(o,l):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},i:L,o:L,d(o){o&&d(e),r.d(o)}}}function vt(s,e,n){let{result:t,n:r,b:o,t:l,e:c}=e,i=0;function f(a){return o&&(a==="\r"||a==="")?"&nbsp;":++i}function u(a){return a=a.replaceAll(/\r/g,""),l&&(a=a.replaceAll(/\t/g,"^T")),c&&(a+="$"),(a===""||a.trim()==="")&&!r&&!o&&(a=""),a}return s.$$set=a=>{"result"in a&&n(0,t=a.result),"n"in a&&n(1,r=a.n),"b"in a&&n(2,o=a.b),"t"in a&&n(5,l=a.t),"e"in a&&n(6,c=a.e)},[t,r,o,f,u,l,c]}class $t extends B{constructor(e){super(),Y(this,e,vt,yt,ie,{result:0,n:1,b:2,t:5,e:6})}}async function Et(s){try{const{regularArgs:e,options:n}=ze(s,["n","b","v","t","e","A"],10,1),t=n.includesOneOf("n"),r=n.includesOneOf("b"),o=n.includesOneOf("t","A"),l=n.includesOneOf("e","A"),c=[];for(let f=0;f<e.length;f++){const u=ne(e[f]),[,a]=le(u);a==="fileTree"&&Z("'"+e[f]+"' is a directory"),c.push(u)}let i=await Promise.all(c.map(async f=>(await fetch("/files/"+f.join("/"))).text()));return i=i.join(`\r
`),{component:$t,data:{result:i.split(/\n/gm),n:t,b:r,t:o,e:l}}}catch(e){switch(e.message){case"Not a directory":case"No such file or directory":throw new Error("cat: "+s[0]+": "+e.message);default:throw new Error("cat: "+e.message)}}}function Tt(){let s=null;if(X.subscribe(n=>s=n)(),s===null)throw Error("Internal");return s.join("/").replace("~","/home/aureliendumay.me")}function Ct(s){return s.join(" ")}function Nt(){const s=["cls","c"];let e=`
Here is a list of commands implemented at the moment:

`;for(const n of Object.keys(K))s.includes(n)||(e+="- "+n+`
`);return e+=`
`}const K={help:Nt,ls:ht,cd:it,cat:Et,pwd:Tt,echo:Ct,history:mt,clear:Me};K.cls=K.clear;K.c=K.clear;async function oe(s){let e;X.subscribe(t=>e=[...t])(),Q.update(t=>(t.push({path:e,input:s,cancelled:!1,output:[]}),t)),fe.update(t=>(t.includes(s)&&t.splice(t.indexOf(s),1),s.trim()!==""&&t.unshift(s),t));try{const t=tt(s);for(let r=0;r<t.length;r++)if(typeof t[r]!="string")try{const o=t[r].shift(),l=t[r];if(o.startsWith("./")||o.startsWith("/")||o.startsWith("../")){const c=await ot(o,l);Q.update(i=>(i.length>0&&!i[i.length-1].cancelled&&i[i.length-1].output.push(c),i))}else if(K[o]){const c=await K[o](l);Q.update(i=>(i.length>0&&!i[i.length-1].cancelled&&i[i.length-1].output.push(c),i))}else re(new Error(o+": not found"))}catch(o){re(o)}}catch(t){re(t)}}function re(s){console.error(s),Q.update(e=>(e[e.length-1].output.push({component:rt,data:{message:"Error: "+s.message}}),e))}function It(s){let e,n,t,r;return n=new Re({props:{to:"/",$$slots:{default:[jt]},$$scope:{ctx:s}}}),{c(){e=j(`If your not used to this type of interface, you can access the formal version at
        `),R(n.$$.fragment),t=j(".")},m(o,l){p(o,e,l),M(n,o,l),p(o,t,l),r=!0},i(o){r||(v(n.$$.fragment,o),r=!0)},o(o){T(n.$$.fragment,o),r=!1},d(o){o&&(d(e),d(t)),z(n,o)}}}function Ot(s){let e,n,t,r,o;return t=new Re({props:{to:"/",$$slots:{default:[At]},$$scope:{ctx:s}}}),{c(){e=m("span"),n=j(`Warning: This interface is not optimized for touch devices, it is recommended to visit the formal version
            (available at `),R(t.$$.fragment),r=j(")."),w(e,"class","red")},m(l,c){p(l,e,c),g(e,n),M(t,e,null),g(e,r),o=!0},i(l){o||(v(t.$$.fragment,l),o=!0)},o(l){T(t.$$.fragment,l),o=!1},d(l){l&&d(e),z(t)}}}function jt(s){let e;return{c(){e=j("https://aureliendumay.me/")},m(n,t){p(n,e,t)},d(n){n&&d(e)}}}function At(s){let e;return{c(){e=j("https://aureliendumay.me/")},m(n,t){p(n,e,t)},d(n){n&&d(e)}}}function Dt(s){let e,n,t,r,o,l,c,i,f,u,a,E,W,I,A,b,y,_;const h=[Ot,It],O=[];function H($,C){var k;return((k=$[0])==null?void 0:k.device)==="mobile"?0:1}return l=H(s),c=O[l]=h[l](s),{c(){e=m("pre"),e.textContent=`${We}v${{}.VITE_VERSION}
`,n=D(),t=m("p"),r=m("br"),o=D(),c.c(),i=D(),f=m("br"),u=m("br"),a=j(`
    Type
    
    `),E=m("span"),E.textContent="'help'",W=j(`
    for the list of available commands.
    `),I=m("br"),A=m("br"),G(e,"color","var(--gray)"),w(E,"class","help svelte-1pfrmh8")},m($,C){p($,e,C),p($,n,C),p($,t,C),g(t,r),g(t,o),O[l].m(t,null),g(t,i),g(t,f),g(t,u),g(t,a),g(t,E),g(t,W),g(t,I),g(t,A),b=!0,y||(_=J(E,"click",s[1]),y=!0)},p($,[C]){let k=l;l=H($),l!==k&&(F(),T(O[k],1,1,()=>{O[k]=null}),U(),c=O[l],c||(c=O[l]=h[l]($),c.c()),v(c,1),c.m(t,i))},i($){b||(v(c),b=!0)},o($){T(c),b=!1},d($){$&&(d(e),d(n),d(t)),O[l].d(),y=!1,_()}}}function St(s,e,n){let t;return V(s,Pe,o=>n(0,t=o)),[t,()=>oe("help")]}class qt extends B{constructor(e){super(),Y(this,e,St,Dt,ee,{})}}function Ce(s,e,n){const t=s.slice();return t[2]=e[n],t[4]=n,t}function Ne(s){let e;return{c(){e=m("span"),e.textContent="/"},m(n,t){p(n,e,t)},d(n){n&&d(e)}}}function Ie(s,e){let n,t=e[2]+"",r,o,l=e[4]<e[0].length-1&&Ne();return{key:s,first:null,c(){n=m("span"),r=j(t),l&&l.c(),o=S(),w(n,"class","dir svelte-1557kp6"),this.first=n},m(c,i){p(c,n,i),g(n,r),l&&l.m(c,i),p(c,o,i)},p(c,i){e=c,i&1&&t!==(t=e[2]+"")&&P(r,t),e[4]<e[0].length-1?l||(l=Ne(),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},d(c){c&&(d(n),d(o)),l&&l.d(c)}}}function Lt(s){let e,n,t=[],r=new Map,o,l=q(s[0]);const c=i=>i[4];for(let i=0;i<l.length;i+=1){let f=Ce(s,l,i),u=c(f);r.set(u,t[i]=Ie(u,f))}return{c(){e=m("span"),n=m("span"),n.textContent="- ";for(let i=0;i<t.length;i+=1)t[i].c();o=m("span"),o.textContent="$Â ",w(n,"class","user svelte-1557kp6"),w(e,"class","wrapper svelte-1557kp6")},m(i,f){p(i,e,f),g(e,n);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);g(e,o)},p(i,[f]){f&1&&(l=q(i[0]),t=te(t,f,c,1,i,l,r,e,ae,Ie,o,Ce))},i:L,o:L,d(i){i&&d(e);for(let f=0;f<t.length;f+=1)t[f].d()}}}function Ht(s,e,n){let t;V(s,X,o=>n(1,t=o));let{path:r=t}=e;return s.$$set=o=>{"path"in o&&n(0,r=o.path)},[r]}class Fe extends B{constructor(e){super(),Y(this,e,Ht,Lt,ie,{path:0})}}function Wt(s){let e,n,t;const r=[s[0].data];var o=s[0].component;function l(c,i){let f={};if(i!==void 0&&i&1)f=pe(r,[de(c[0].data)]);else for(let u=0;u<r.length;u+=1)f=Be(f,r[u]);return{props:f}}return o&&(e=_e(o,l(s))),{c(){e&&R(e.$$.fragment),n=S()},m(c,i){e&&M(e,c,i),p(c,n,i),t=!0},p(c,i){if(i&1&&o!==(o=c[0].component)){if(e){F();const f=e;T(f.$$.fragment,1,0,()=>{z(f,1)}),U()}o?(e=_e(o,l(c,i)),R(e.$$.fragment),v(e.$$.fragment,1),M(e,n.parentNode,n)):e=null}else if(o){const f=i&1?pe(r,[de(c[0].data)]):{};e.$set(f)}},i(c){t||(e&&v(e.$$.fragment,c),t=!0)},o(c){e&&T(e.$$.fragment,c),t=!1},d(c){c&&d(n),e&&z(e,c)}}}function Pt(s){let e,n=s[0]!==""&&Oe(s);return{c(){n&&n.c(),e=S()},m(t,r){n&&n.m(t,r),p(t,e,r)},p(t,r){t[0]!==""?n?n.p(t,r):(n=Oe(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:L,o:L,d(t){t&&d(e),n&&n.d(t)}}}function Oe(s){let e,n,t,r;return{c(){e=m("br"),n=D(),t=m("pre"),r=j(s[0])},m(o,l){p(o,e,l),p(o,n,l),p(o,t,l),g(t,r)},p(o,l){l&1&&P(r,o[0])},d(o){o&&(d(e),d(n),d(t))}}}function Rt(s){let e,n,t,r;const o=[Pt,Wt],l=[];function c(i,f){return typeof i[0]=="string"?0:1}return e=c(s),n=l[e]=o[e](s),{c(){n.c(),t=S()},m(i,f){l[e].m(i,f),p(i,t,f),r=!0},p(i,[f]){let u=e;e=c(i),e===u?l[e].p(i,f):(F(),T(l[u],1,1,()=>{l[u]=null}),U(),n=l[e],n?n.p(i,f):(n=l[e]=o[e](i),n.c()),v(n,1),n.m(t.parentNode,t))},i(i){r||(v(n),r=!0)},o(i){T(n),r=!1},d(i){i&&d(t),l[e].d(i)}}}function Mt(s,e,n){let{output:t}=e;return s.$$set=r=>{"output"in r&&n(0,t=r.output)},[t]}class zt extends B{constructor(e){super(),Y(this,e,Mt,Rt,ee,{output:0})}}const{window:Ft}=xe;function je(s,e,n){const t=s.slice();return t[15]=e[n],t}function Ae(s,e,n){const t=s.slice();return t[18]=e[n],t[20]=n,t}function De(s){let e,n;return e=new qt({}),{c(){R(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Se(s){let e=[],n=new Map,t,r,o=q(s[15].output);const l=c=>c[20];for(let c=0;c<o.length;c+=1){let i=Ae(s,o,c),f=l(i);n.set(f,e[c]=qe(f,i))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();t=S()},m(c,i){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(c,i);p(c,t,i),r=!0},p(c,i){i&8&&(o=q(c[15].output),F(),e=te(e,i,l,1,c,o,n,t.parentNode,et,qe,t,Ae),U())},i(c){if(!r){for(let i=0;i<o.length;i+=1)v(e[i]);r=!0}},o(c){for(let i=0;i<e.length;i+=1)T(e[i]);r=!1},d(c){c&&d(t);for(let i=0;i<e.length;i+=1)e[i].d(c)}}}function qe(s,e){let n,t,r;return t=new zt({props:{output:e[18]}}),{key:s,first:null,c(){n=S(),R(t.$$.fragment),this.first=n},m(o,l){p(o,n,l),M(t,o,l),r=!0},p(o,l){e=o;const c={};l&8&&(c.output=e[18]),t.$set(c)},i(o){r||(v(t.$$.fragment,o),r=!0)},o(o){T(t.$$.fragment,o),r=!1},d(o){o&&d(n),z(t,o)}}}function Le(s){let e,n,t,r=s[15].input+"",o,l,c;n=new Fe({props:{path:s[15].path}});let i=s[15].output&&Se(s);return{c(){e=m("div"),R(n.$$.fragment),t=m("span"),o=j(r),l=D(),i&&i.c(),w(t,"class","previous-input svelte-1jrrhot")},m(f,u){p(f,e,u),M(n,e,null),g(e,t),g(t,o),g(e,l),i&&i.m(e,null),c=!0},p(f,u){const a={};u&8&&(a.path=f[15].path),n.$set(a),(!c||u&8)&&r!==(r=f[15].input+"")&&P(o,r),f[15].output?i?(i.p(f,u),u&8&&v(i,1)):(i=Se(f),i.c(),v(i,1),i.m(e,null)):i&&(F(),T(i,1,1,()=>{i=null}),U())},i(f){c||(v(n.$$.fragment,f),v(i),c=!0)},o(f){T(n.$$.fragment,f),T(i),c=!1},d(f){f&&d(e),z(n),i&&i.d()}}}function Ut(s){let e,n,t,r,o,l;return n=new Fe({}),{c(){e=m("div"),R(n.$$.fragment),t=m("span"),w(t,"contenteditable","true"),w(t,"spellcheck","false"),w(t,"class","input svelte-1jrrhot"),w(e,"class","prompt-wrapper svelte-1jrrhot")},m(c,i){p(c,e,i),M(n,e,null),g(e,t),s[6](t),r=!0,o||(l=[J(t,"paste",s[5]),J(e,"click",s[7])],o=!0)},p:L,i(c){r||(v(n.$$.fragment,c),r=!0)},o(c){T(n.$$.fragment,c),r=!1},d(c){c&&d(e),z(n),s[6](null),o=!1,Je(l)}}}function Vt(s){let e,n;return e=new Ze({props:{withMargin:!0}}),{c(){R(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p:L,i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function Kt(s){let e,n,t,r,o,l,c,i,f=!s[2]&&De(),u=q(s[3]),a=[];for(let b=0;b<u.length;b+=1)a[b]=Le(je(s,u,b));const E=b=>T(a[b],1,1,()=>{a[b]=null}),W=[Vt,Ut],I=[];function A(b,y){return b[1]?0:1}return r=A(s),o=I[r]=W[r](s),{c(){e=m("main"),f&&f.c(),n=D();for(let b=0;b<a.length;b+=1)a[b].c();t=D(),o.c(),w(e,"id","cli"),w(e,"class","svelte-1jrrhot")},m(b,y){p(b,e,y),f&&f.m(e,null),g(e,n);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(e,null);g(e,t),I[r].m(e,null),l=!0,c||(i=J(Ft,"keydown",s[4]),c=!0)},p(b,[y]){if(b[2]?f&&(F(),T(f,1,1,()=>{f=null}),U()):f?y&4&&v(f,1):(f=De(),f.c(),v(f,1),f.m(e,n)),y&8){u=q(b[3]);let h;for(h=0;h<u.length;h+=1){const O=je(b,u,h);a[h]?(a[h].p(O,y),v(a[h],1)):(a[h]=Le(O),a[h].c(),v(a[h],1),a[h].m(e,t))}for(F(),h=u.length;h<a.length;h+=1)E(h);U()}let _=r;r=A(b),r===_?I[r].p(b,y):(F(),T(I[_],1,1,()=>{I[_]=null}),U(),o=I[r],o?o.p(b,y):(o=I[r]=W[r](b),o.c()),v(o,1),o.m(e,null))},i(b){if(!l){v(f);for(let y=0;y<u.length;y+=1)v(a[y]);v(o),l=!0}},o(b){T(f),a=a.filter(Boolean);for(let y=0;y<a.length;y+=1)T(a[y]);T(o),l=!1},d(b){b&&d(e),f&&f.d(),ce(a,b),I[r].d(),c=!1,i()}}}function Bt(s,e,n){let t,r,o,l,c;V(s,se,_=>n(10,t=_)),V(s,fe,_=>n(11,r=_)),V(s,Pe,_=>n(12,o=_)),V(s,He,_=>n(2,l=_)),V(s,Q,_=>n(3,c=_));let i,f=!0,u=-1,a="";async function E(_){const h=_.key,O=_.ctrlKey,H=(o==null?void 0:o.keyboard)==="apple"?_.metaKey:_.ctrlKey,$=_.shiftKey;switch(h.toLowerCase()){case"control":case"command":case"shift":return;case"tab":_.preventDefault();return;case"l":O&&!$&&(_.preventDefault(),Me());break;case"b":case"u":case"i":H&&_.preventDefault();break}if(document.activeElement!==i){const C=H&&h.toLowerCase()==="c",k=$&&h.startsWith("Arrow");!f&&!C&&!k&&(A(),window.scrollTo(0,document.body.scrollHeight))}else u!==-1&&i.innerText!==r[u]&&(u=-1),(h==="ArrowUp"||h==="ArrowDown")&&(_.preventDefault(),I(h)),h==="Enter"&&(_.preventDefault(),n(1,f=!0),await oe(i.innerText),u=-1,n(1,f=!1))}async function W(_){var O;if(!_.clipboardData)return;const h=(O=_.clipboardData)==null?void 0:O.getData("Text").replaceAll(/\r/,"");if(h.match(/\n/)){const H=h.split(/\n/),$=H.length-1;for(let C=0;C<$;C++)await oe(H[C]);n(0,i.innerText=H[$],i),A()}else h&&(n(0,i.innerText=h,i),A());_.preventDefault()}function I(_){_==="ArrowUp"?u+1<r.length&&(u===-1&&(a=i.innerText),n(0,i.innerText=r[++u],i)):u>0?n(0,i.innerText=r[--u],i):u===0&&(n(0,i.innerText=a,i),u=-1),A()}function A(){const _=document.createRange(),h=window.getSelection();h&&(_.selectNodeContents(i),_.collapse(!1),h.removeAllRanges(),h.addRange(_),i.focus(),_.detach(),n(0,i.scrollTop=i.scrollHeight,i))}Ye(async()=>{console.info("%c"+We+"v"+{}.VITE_VERSION,"color: cyan");try{const _=await fetch("/fileTree.json");Qe(se,t=await _.json(),t),n(1,f=!1)}catch{}}),Xe(()=>{i&&(window.scrollTo(0,document.body.scrollHeight),i.focus())});function b(_){Ge[_?"unshift":"push"](()=>{i=_,n(0,i)})}return[i,f,l,c,E,W,b,()=>i.focus()]}class Jt extends B{constructor(e){super(),Y(this,e,Bt,Kt,ee,{})}}export{Jt as default};
